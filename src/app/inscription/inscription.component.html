<div class="inscription-container">
  @if (inscriptionError) {
    <div @slideFromTop class="warning-box error">
      <h3>Une erreur est survenue ...</h3>
      <p>{{ inscriptionError.message }}</p>
    </div>
  }

  
  <form
    [formGroup]="inscriptionForm"
    class="inscription-form"
    (submit)="inscription()"
  >
  <button class="back-button" (click)="backStep()">
    <i class="fa fa-arrow-left"></i>&nbsp;Étape précédente
  </button>
  
  <div *ngIf="stepInscription === 1">
    <p>Saisissez votre adresse email ou votre numéro de téléphone</p>
    <div class="input-container">
      <input
        [ngClass]="{ invalid: isEmailInvalid(), valid: isEmailValid() }"
        placeholder="Email"
        type="email"
        formControlName="email"
      />
      <div class="status-indicator" [ngClass]="{ 'invalid-status': isEmailInvalid(), 'valid-status': isEmailValid() }">
        <i *ngIf="isEmailInvalid()" class="fas fa-times"></i> <!-- Crois rouge -->
        <i *ngIf="isEmailValid()" class="fas fa-check"></i>  <!-- Coche verte -->
      </div>
    </div>
    <p *ngIf="emailControl?.hasError('required') && emailControl?.touched" class="error">
      L'email est requis.
    </p>
    <p *ngIf="emailControl?.hasError('email') && emailControl?.touched" class="error">
      L'email n'est pas valide.
    </p>
  </div>
  
  
  

    <div *ngIf="stepInscription === 2">
      <input
        [ngClass]="{ invalid: isInvalidField('firstName') }"
        placeholder="Prénom"
        type="text"
        formControlName="firstName"
      />
      <input
        [ngClass]="{ invalid: isInvalidField('lastName') }"
        placeholder="Nom"
        type="text"
        formControlName="lastName"
      />
      <input
        [ngClass]=""
        placeholder="Date de naissance"
        type="text"
        formControlName="birthDate"
      />
    </div>

    <div *ngIf="stepInscription === 3">
      <input
        [ngClass]="{ invalid: isInvalidField('password') }"
        placeholder="Mot de passe"
        type="password"
        formControlName="password"
      />
      
    </div>
    <div class="progress-bar">
      <div class="progress" [style.width]="(stepInscription / 4) * 100 + '%'"></div>
    </div>
    <button (click)="nextStep()">Continuer</button>
      <!-- <input 
      type="checkbox" 
      id="acceptTerms"
      [(ngModel)]="acceptTerms"
      (change)="onTermsChange()" 
      required
    />
   
    <p>{{acceptTerms}}</p>
      <button class="btn-1" type="submit" [disabled]="!acceptTerms">
        @if (chargementEnCours) {
          <div class="loader"></div>
        } @else {
          <h3>Inscription</h3>
        }
      </button>
      <div class="ou-ligne">
        <div class="ligne"></div>
        <p>ou</p>
        <div class="ligne"></div>
      </div>
      <a [routerLink]="['/connexion']">se connecter</a>
      <button (click)="backStep()">Précédent</button>
  </form>
</div>
-->


